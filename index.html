<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Xreview - Pel√≠culas, Animes y Series</title>
  <link rel="stylesheet" href="styles/main.css">
</head>
<body>
  <!-- Logo y encabezado -->
  <div class="container-logo">
    <div class="logo-img">
      <img src="./storage/img/EDITADO.png" alt="" />
      <div class="auth-header">
        <h1>Xreview</h1>
        <p>Plataforma de rese<span class="tilde">√±</span>as</p>
      </div>
    </div>
  </div>

  <!-- Contenedor de login/registro -->
  <div class="container">
    <div class="auth-wrapper">
      
      <!-- Login Form -->
      <div id="login-form" class="auth-form active">
        <h2>Iniciar Sesion</h2>
        <form id="loginForm">
          <div class="form-group">
            <label for="loginEmail">Email</label>
            <input type="email" id="loginEmail" name="email" required>
            <span class="error-message" id="loginEmailError"></span>
          </div>
          <div class="form-group">
            <label for="loginPassword">Contrase<span class="√±">√±</span>a</label>
            <input type="password" id="loginPassword" name="password" required>
            <span class="error-message" id="loginPasswordError"></span>
          </div>
          <button type="submit" class="btn-primary">Iniciar Sesion</button>
        </form>
        <p class="switch-form">
          ¬øNo tienes cuenta? <a href="#" id="showRegister">Registrate aqui</a>
        </p>
      </div>

      <!-- Register Form -->
      <div id="register-form" class="auth-form">
        <h2>Registro</h2>
        <form id="registerForm">
          <div class="form-group">
            <label for="registerEmail">Email</label>
            <input type="email" id="registerEmail" name="email" required>
            <span class="error-message" id="registerEmailError"></span>
          </div>
          <div class="form-group">
            <label for="registerPassword">Contrase<span class="√±">√±</span>a</label>
            <input type="password" id="registerPassword" name="password" required minlength="2">
            <span class="error-message" id="registerPasswordError"></span>
          </div>
          <div class="form-group">
            <label for="registerApodo">Apodo</label>
            <input type="text" id="registerApodo" name="apodo" required>
            <span class="error-message" id="registerApodoError"></span>
          </div>
          <input type="hidden" name="rol" value="usuario">
          <button type="submit" class="btn-primary">Registrarse</button>
        </form>
        <p class="switch-form">
          ¬øYa tienes cuenta? <a href="#" id="showLogin">Inicia sesion aqui</a>
        </p>
      </div>

    </div>
  </div>

<!-- Perfil del usuario (oculto al inicio) -->
<div id="profileSection" class="profile-section hidden">
  <h2>üë§ Mi Perfil</h2>
  <div class="profile-card">
    <p><strong>Apodo:</strong> <span id="profileApodo"></span></p>
    <p><strong>Email:</strong> <span id="profileEmail"></span></p>
    <p><strong>Rol:</strong> <span id="profileRol"></span></p>
  </div>
  <button id="backToDashboard" class="btn-secondary">‚¨ÖÔ∏è Volver al Dashboard</button>
</div>

<!-- Gesti√≥n de usuarios (oculto al inicio, solo admin) -->
<div id="userManagement" class="hidden">
  <h2>üë• Gesti√≥n de Usuarios</h2>
  <div id="userList"></div>
  <button id="backToDashboardUsers" class="btn-secondary">‚¨ÖÔ∏è Volver al Dashboard</button>
</div>

  <!-- Dashboard (oculto al inicio) -->
  <div id="dashboard" class="dashboard ">

    <div class="dashboard-title">
      <div>
        <h1>Bienvenido a Xreview</h1>
        <!-- <button id="logoutBtn" class="btn-secondary">Cerrar Sesion</button> -->
      </div>
      <div class="dropdown-container">
            <button class="dropdown-btn" id="dropdownBtn">
                <span id="userApodo">masterCUleo</span>
                <span class="dropdown-arrow" id="dropdownArrow"></span>
            </button>
            
            <div class="dropdown-menu" id="dropdownMenu">
                <button class="dropdown-item" id="userRol">
                    üë§ Usuario
                </button>
                <button class="dropdown-item" data-action="profile-section">
                    ‚öôÔ∏è Perfil
                </button>
                <div class="dropdown-separator"></div>
                <button class="dropdown-item" id="logoutBtn">
                    üö™ Cerrar Sesi√≥n
                </button>
            </div>
        </div>
    </div>

    <div class="dashboard-content">
      
      <!-- Barra de b√∫squeda -->
      <div class="search-main">
        <div class="search-bar">
          <input type="text" class="search-input" placeholder="Buscar contenido..." id="searchInput">
          <div class="search-icon" onclick="performSearch()"></div>
        </div>

        <!-- Filtros -->
        <div class="filters-section">
          <div class="filters-title">
            <h2>Filtros</h2>
            <span id="activeFiltersCount" class="active-filters-count" style="display: none;">0</span>
          </div>

          <div class="filters-container">
            <!-- Filtro por popularidad -->
            <div class="filter-button" data-filter="popularidad">
              <span class="filter-icon">‚ù§Ô∏è</span>
              <span></span>
              <span class="selected-value"></span> <!-- üëà aqu√≠ se pintar√° el valor -->
              <div class="filter-dropdown">
                <div class="dropdown-option" data-value="mas-gustados">M√°s gustados</div>
                <div class="dropdown-option" data-value="menos-gustados">Top ranking</div>
                <div class="dropdown-option" data-value="sin-orden">Sin orden</div>
              </div>
            </div>

            <!-- Filtro por categor√≠a -->
            <div class="filter-button" data-filter="categoria">
              <span class="filter-icon">üìÇ</span>
              <span></span>
              <span class="selected-value"></span> <!-- üëà aqu√≠ se pintar√° el valor -->
              <div class="filter-dropdown">
                <div class="dropdown-option" data-value="Acci√≥n">Accion</div>
                <div class="dropdown-option" data-value="Drama">Drama</div>
                <div class="dropdown-option" data-value="Comedia">Comedia</div>
                <div class="dropdown-option" data-value="Ciencia">Ciencia</div>
                <div class="dropdown-option" data-value="Ficci√≥n">Ficcion</div>
                <div class="dropdown-option" data-value="Terror">Terror</div>
                <div class="dropdown-option" data-value="Fantas√≠a">Fantasia</div>
              </div>
            </div>

            <!-- Filtro por tipo -->
            <div class="filter-button" data-filter="tipo">
              <span class="filter-icon">üìÑ</span>
              <span></span>
              <span class="selected-value"></span> <!-- üëà aqu√≠ se pintar√° el valor -->
              <div class="filter-dropdown">
                <div class="dropdown-option" data-value="pelicula">Pelicula</div>
                <div class="dropdown-option" data-value="serie">Serie</div>
                <div class="dropdown-option" data-value="anime">anime</div>
              </div>
            </div>

            <!-- Bot√≥n limpiar -->
            <button class="clear-filters">üóëÔ∏è Limpiar filtros</button>
            
            <button id="openModal" class="crear-titulos">‚ûï Crear titulo</button>
         
          </div>

          <!-- Secci√≥n de resultados -->
            <div class="results-section">
                <div class="results-info" id="resultsInfo">
                    Mostrando todos los resultados
                </div>
                
                <div class="results-grid" id="resultsGrid">
                    <!-- Resultados de ejemplo -->
                    <div class="result-card">
                        <div class="result-title"></div>
                        <div class="result-meta">
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Secci√≥n de carousel para contenido m√°s top -->
             <div class="tops-section">
                <div class="tops-header">
                    <h2 class="tops-title">Titulos</h2>
                    <div class="carousel-controls">
                        <button class="carousel-btn prev-btn">‚Äπ</button>
                        <button class="carousel-btn next-btn">‚Ä∫</button>
                    </div>
                </div>
                
                <div class="carousel-container">
                    <div class="carousel-track" id="carouselTrack">
                        <!-- Item 1 -->
                        <div class="carousel-item">
                            <div class="item-image">
                            </div>
                            <div class="item-content">
                                <div class="item-stats">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
      </div>

      <!-- Panel de rese√±as -->
      <div id="reviewsPanel">
        <h3>Gesti√≥n de Rese√±as</h3>
        <form id="createReviewForm" class="review-form">
          <div class="form-group">
            <label for="tituloId">ID del T√≠tulo</label>
            <input type="text" id="tituloId" name="tituloId" required>
          </div>
          <div class="form-group">
            <label for="encabezado">Encabezado</label>
            <input type="text" id="encabezado" name="encabezado" required>
          </div>
          <div class="form-group">
            <label for="comentario">Comentario</label>
            <textarea id="comentario" name="comentario" required></textarea>
          </div>
          <div class="form-group">
            <label for="calificacion">Calificaci√≥n (1-10)</label>
            <input type="number" id="calificacion" name="calificacion" min="1" max="10" required>
          </div>
          <button type="submit" class="btn-primary">Crear Rese√±a</button>
        </form>
        <ul id="reseniasLista" class="resenias-lista"></ul>
      </div>

      <!-- Mensajes -->
      <div id="message" class="message hidden"></div>

      <!-- Info token -->
      <div class="token-info">
        <h3>Token JWT:</h3>
        <textarea id="tokenDisplay" readonly></textarea>
      </div>
    </div>
  </div>
  <!-- Modal Crear T√≠tulo -->
  <div id="crearTituloModal" class="modal hidden">
    <div class="modal-content">
      <span class="close-btn" id="closeModal">&times;</span>
      <h2>Crear Titulo</h2>
      <form id="crearTituloForm" enctype="multipart/form-data">
        <div class="form-group">
          <label for="titulo">T√≠tulo</label>
          <input type="text" id="titulo" name="titulo" required>
        </div>
        <div class="form-group">
          <label for="tipo">Tipo</label>
          <select id="tipo" name="tipo" class="tipo-new" required>
            <option value="pelicula">Pel√≠cula</option>
            <option value="serie">Serie</option>
            <option value="anime">Anime</option>
          </select>
        </div>
        <div class="form-group">
          <label for="descripcion">Descripci√≥n</label>
          <textarea id="descripcion" name="descripcion" class="descripcion-new" required></textarea>
        </div>
        <div class="form-group">
          <label for="categoria">Categor√≠a</label>
          <select id="categoria" name="categoria" class="categoria-new" required>
            <option value="Accion">Accion</option>
            <option value="Drama">Drama</option>
            <option value="Comedia">Comedia</option>
            <option value="Ciencia">Ciencia</option>
            <option value="Ficcion">Ficcion</option>
            <option value="Terror">Terror</option>
            <option value="Fantasia">Fantasia</option>
          </select>
        </div>
        <div class="form-group">
          <label for="anio">A√±o</label>
          <input type="number" id="anio" name="anio" required min="1800">
        </div>
        <button type="submit" class="btn-primary">Guardar</button>
      </form>
    </div>
  </div>
  <script type="module" src="./js/main.js"></script>
</body>
</html>
